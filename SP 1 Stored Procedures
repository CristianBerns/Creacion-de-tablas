CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_libros`(IN campo_ordenador VARCHAR(100), IN orden VARCHAR(10))
BEGIN
  -- Validar si el campo_ordenador es "Título" para después armar la consulta
  IF campo_ordenador = 'Título' OR campo_ordenador = 'Autor' THEN
    SET @libro = CONCAT('SELECT * FROM libreriafinanciera.producto ORDER BY ', campo_ordenador, ' ', orden);
    -- Preparar y ejecutar la consulta dinámica.
    PREPARE stmt FROM @libro;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
  ELSE
    -- Si el campo_ordenador no es "Título" ni "Autor", mostrar un mensaje de error.
    SELECT 'Error: El campo_ordenador debe ser "Título" o "Autor"' AS Mensaje;
  END IF;
END
